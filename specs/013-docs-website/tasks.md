# Tasks: Documentation Website

**Input**: Design documents from `/specs/013-docs-website/`
**Prerequisites**: plan.md (required), spec.md (required), research.md, data-model.md, contracts/

**Tests**: No test tasks included. This feature produces zero production code â€” only Docusaurus configuration, Markdown content, CSS, and a CI workflow YAML. The build (`npm run build`) validates all content and configuration at build time. See plan.md Constitution Check for the full TDD exception justification.

**Organization**: Tasks are grouped by user story to enable independent implementation and testing of each story.

## Format: `[ID] [P?] [Story] Description`

- **[P]**: Can run in parallel (different files, no dependencies)
- **[Story]**: Which user story this task belongs to (e.g., US1, US2, US3)
- Include exact file paths in descriptions

## Path Conventions

- **Website tooling**: `website/` (Docusaurus project)
- **Documentation content**: `docs/` (Markdown files at repo root)
- **CI workflow**: `.github/workflows/`

---

## Phase 1: Setup (Project Initialization)

**Purpose**: Scaffold the Docusaurus project and prepare the repository for documentation content

- [X] T001 Relocate docs/PRE-COMMIT-CHECKLIST.md to design-notes/PRE-COMMIT-CHECKLIST.md to clear the docs/ directory for documentation content
- [X] T002 Scaffold Docusaurus project in website/ using `npx create-docusaurus@latest website classic --typescript` from repo root
- [X] T003 Install @docusaurus/theme-mermaid dependency in website/ via `npm install @docusaurus/theme-mermaid`
- [X] T004 Add website/.gitignore to exclude node_modules/, build/, .docusaurus/, and .cache-loader/
- [X] T005 Verify scaffolded project builds successfully by running `npm run build` in website/

---

## Phase 2: Foundational (Core Configuration)

**Purpose**: Configure the Docusaurus site with all required settings before any content is added. MUST be complete before user story work begins.

**âš ï¸ CRITICAL**: No user story work can begin until this phase is complete

- [X] T006 Configure docusaurus.config.ts with site metadata (title, tagline, url, baseUrl, organizationName, projectName, trailingSlash, onBrokenLinks) per contracts/docusaurus-config.md in website/docusaurus.config.ts
- [X] T007 Configure docusaurus.config.ts presets â€” set docs.path to '../docs', docs.sidebarPath to './sidebars.ts', docs.editUrl, disable blog, set customCss path in website/docusaurus.config.ts
- [X] T008 Configure docusaurus.config.ts Mermaid support â€” add markdown.mermaid: true and '@docusaurus/theme-mermaid' to themes array in website/docusaurus.config.ts
- [X] T009 Configure docusaurus.config.ts themeConfig â€” navbar (title, docs sidebar link, GitHub link), footer (Documentation links, Community links), colorMode (dark default, respectPrefersColorScheme) in website/docusaurus.config.ts
- [X] T010 Configure sidebar as autogenerated from docs directory in website/sidebars.ts per contracts/docusaurus-config.md
- [X] T011 [P] Create docs/getting-started/_category_.json with label "Getting Started" and position 1
- [X] T012 [P] Create docs/configuration/_category_.json with label "Configuration" and position 2
- [X] T013 [P] Create docs/commands/_category_.json with label "Commands" and position 3
- [X] T014 [P] Create docs/guides/_category_.json with label "Guides" and position 4
- [X] T015 [P] Create docs/architecture/_category_.json with label "Architecture" and position 5
- [X] T016 Remove Docusaurus scaffolded default content â€” delete website/docs/ (scaffolded tutorial files, NOT docs/ at repo root), website/blog/, and website/src/pages/index.tsx default content
- [X] T016b [P] Create website/src/pages/404.tsx with friendly error message and navigation link back to /docs/getting-started/installation
- [X] T017 Verify configured site builds successfully with empty docs sections by running `npm run build` in website/

**Checkpoint**: Foundation ready â€” Docusaurus is configured with all 5 sections, autogenerated sidebar, Mermaid, and dark mode defaults. User story implementation can now begin.

---

## Phase 3: User Story 1 â€” Browse Documentation Online (Priority: P1) ðŸŽ¯ MVP

**Goal**: Deploy a navigable documentation site with a landing page, sidebar navigation across 5 sections, and at least one page of content per section so the site is functional end-to-end.

**Independent Test**: Visit the local dev server and confirm the landing page loads, sidebar shows 5 sections, and clicking each section navigates to a content page.

### Implementation for User Story 1

- [X] T018 [US1] Create landing page component with hero section (title, tagline, call-to-action button linking to docs) in website/src/pages/index.tsx
- [X] T018b [US1] Add CLI badge (`> dottie`) to landing page hero section per style-guide.md branding guidelines
- [X] T019 [US1] Create landing page styles module in website/src/pages/index.module.css
- [X] T020 [P] [US1] Create stub page docs/getting-started/installation.md with frontmatter (title: Installation, sidebar_position: 1) and brief description â€” expanded in T027
- [X] T021 [P] [US1] Create stub page docs/configuration/overview.md with frontmatter (title: Overview, sidebar_position: 1) and brief description â€” expanded in T044
- [X] T022 [P] [US1] Create stub page docs/commands/validate.md with frontmatter (title: Validate, sidebar_position: 1) and brief description â€” expanded in T034
- [X] T023 [P] [US1] Create stub page docs/guides/profile-inheritance.md with frontmatter (title: Profile Inheritance, sidebar_position: 1) and brief description â€” expanded in T051
- [X] T024 [P] [US1] Create stub page docs/architecture/overview.md with frontmatter (title: Overview, sidebar_position: 1) and brief description â€” expanded in T041
- [X] T025 [US1] Copy branding images from design-notes/FEATURE-17-documentation/ to website/static/img/
- [X] T025b [US1] Create favicon.ico and social card (og:image) following style-guide.md icon guidelines â€” minimalist black-and-white, dot-based or terminal-inspired
- [X] T026 [US1] Verify site builds and all 5 sections appear in sidebar by running `npm run build` in website/

**Checkpoint**: User Story 1 complete â€” the site has a landing page, sidebar with 5 navigable sections, and at least one page per section. This is the MVP.

---

## Phase 4: User Story 2 â€” Read Getting Started Guide (Priority: P1)

**Goal**: Provide a complete Getting Started section (Installation, Quick Start, First Configuration) migrated from README.md content so new users can go from zero to a working Dottie setup.

**Independent Test**: Navigate to Getting Started in the sidebar and follow all three pages in order. Verify the content covers installation, first YAML config, and first command execution.

**Voice/Tone**: All content MUST follow style-guide.md â€” friendly, clear, pragmatic. Always lowercase `dottie` unless starting a sentence. Use CLI examples in `> dottie command` format.

### Implementation for User Story 2

- [X] T027 [US2] Expand stub docs/getting-started/installation.md â€” migrate Installation + Quick Install content from README.md with frontmatter (title: Installation, sidebar_position: 1, description: How to install Dottie on Linux)
- [X] T028 [US2] Write docs/getting-started/quick-start.md â€” migrate Quick Start content from README.md with frontmatter (title: Quick Start, sidebar_position: 2) covering dottie.yaml creation and first validate command
- [X] T029 [US2] Write docs/getting-started/first-config.md â€” create introductory guide to profiles, dotfiles, and install blocks with frontmatter (title: First Configuration, sidebar_position: 3)
- [X] T030 [US2] Verify Getting Started section builds and all 3 pages render by running `npm run build` in website/

**Checkpoint**: User Story 2 complete â€” a new user can follow the Getting Started guide from installation through first command execution.

---

## Phase 5: User Story 3 â€” Automatic Deployment on Content Changes (Priority: P1)

**Goal**: Create the GitHub Actions workflow that automatically builds and deploys the documentation site to GitHub Pages when docs/ or website/ files change on main.

**Independent Test**: Push a documentation change to main and verify the site rebuilds and deploys. Push a non-documentation change and verify the workflow does NOT trigger.

**Note**: GitHub Pages artifact-based deployment preserves the previously deployed version if a new deployment fails. No additional configuration required for failure resilience.

### Implementation for User Story 3

- [X] T031 [US3] Create .github/workflows/docs.yml with build job (checkout, setup-node 20, npm ci, npm run build, upload-pages-artifact) per contracts/deployment-workflow.md
- [X] T032 [US3] Add deploy job to .github/workflows/docs.yml (deploy-pages@v4, github-pages environment, depends on build) per contracts/deployment-workflow.md
- [X] T033 [US3] Configure workflow triggers â€” push to main with paths filter (website/**, docs/**), workflow_dispatch, concurrency group, and permissions per contracts/deployment-workflow.md

**Checkpoint**: User Story 3 complete â€” documentation deploys automatically on push to main with path filtering.

---

## Phase 6: User Story 4 â€” CLI Command Reference (Priority: P2)

**Goal**: Provide a dedicated documentation page for each CLI command (validate, link, install, apply, status, initialize) with descriptions, options, and usage examples.

**Independent Test**: Navigate to the Commands section and verify each of the 6 command pages has a description, options table, and at least one usage example.

**Voice/Tone**: All content MUST follow style-guide.md â€” friendly, clear, pragmatic. Use `> dottie command` format for CLI examples. Emphasize reproducibility and transparency.

### Implementation for User Story 4

- [X] T034 [P] [US4] Write docs/commands/validate.md â€” migrate Validate Configuration content from README.md with description, options, examples, and output samples
- [X] T035 [P] [US4] Write docs/commands/link.md â€” migrate Link Dotfiles content from README.md with description, options table, examples, and output samples
- [X] T036 [P] [US4] Write docs/commands/install.md â€” migrate Install Software content from README.md with description, options, installation priority order, and output samples
- [X] T037 [P] [US4] Write docs/commands/apply.md with frontmatter (title: Apply, sidebar_position: 4) â€” placeholder with description and TODO marker for future content
- [X] T038 [P] [US4] Write docs/commands/status.md with frontmatter (title: Status, sidebar_position: 5) â€” placeholder with description and TODO marker for future content
- [X] T039 [P] [US4] Write docs/commands/initialize.md with frontmatter (title: Initialize, sidebar_position: 6) â€” placeholder with description and TODO marker for future content
- [X] T040 [US4] Verify Commands section builds and all 6 pages render by running `npm run build` in website/

**Checkpoint**: User Story 4 complete â€” all 6 CLI commands have dedicated reference pages.

---

## Phase 7: User Story 5 â€” View Diagrams and Architecture (Priority: P2)

**Goal**: Provide Architecture section with Mermaid diagrams showing component relationships, plus complete the Configuration reference section.

**Independent Test**: Navigate to the Architecture section and confirm Mermaid diagrams render as visual graphics (not code blocks). Navigate to Configuration section and verify all 4 pages are present.

**Voice/Tone**: All content MUST follow style-guide.md â€” friendly, clear, pragmatic. Always lowercase `dottie`. Avoid jargon unless context demands it.

### Implementation for User Story 5

- [X] T041 [P] [US5] Write docs/architecture/overview.md â€” create architecture overview with Mermaid diagram showing ConfigurationLoader â†’ ProfileResolver â†’ Commands flow
- [X] T042 [P] [US5] Write docs/architecture/project-structure.md â€” migrate Project Structure content from README.md with source tree and descriptions
- [X] T043 [P] [US5] Write docs/architecture/design-decisions.md â€” summarize key design decisions from design notes with rationale
- [X] T044 [P] [US5] Write docs/configuration/overview.md â€” expand placeholder with introduction to dottie.yaml configuration system
- [X] T045 [P] [US5] Write docs/configuration/profiles.md â€” migrate Profile Structure content from README.md with YAML examples and extends/inheritance explanation
- [X] T046 [P] [US5] Write docs/configuration/dotfiles.md â€” migrate Dotfile Entries table from README.md with source/target field descriptions
- [X] T047 [P] [US5] Write docs/configuration/install-blocks.md â€” migrate Install Block Types table from README.md with apt, scripts, github, snaps, fonts, aptRepos details
- [X] T048 [US5] Verify Architecture and Configuration sections build with Mermaid diagrams rendering by running `npm run build` in website/

**Checkpoint**: User Story 5 complete â€” Architecture pages with Mermaid diagrams and full Configuration reference are live.

---

## Phase 8: User Story 6 â€” Toggle Dark and Light Mode (Priority: P3)

**Goal**: Apply the terminal-inspired custom theme with dark mode as default, light mode as toggle, and system preference detection.

**Independent Test**: Visit the site, confirm dark mode loads by default with green-on-dark palette. Toggle to light mode, verify colors change. Navigate between pages and confirm preference persists.

### Implementation for User Story 6

- [X] T049 [US6] Write website/src/css/custom.css with light mode CSS variables (:root), dark mode CSS variables ([data-theme="dark"]), and code block styling per contracts/theme.md and style-guide.md color palette
- [X] T049b [US6] Verify colors match style-guide.md: Terminal Green `#33cc66`, Background `#000000`, Text `#eaeaea` in dark mode
- [X] T050 [US6] Verify dark mode is the default and theme toggle switches correctly by running `npm start` in website/ and testing in browser

**Checkpoint**: User Story 6 complete â€” dark/light mode toggle works with terminal-inspired color palette.

---

## Phase 9: User Story 7 â€” Read How-To Guides (Priority: P3)

**Goal**: Provide task-oriented how-to guides for specific use cases (profile inheritance, GitHub releases, APT repos, fonts, scripts).

**Independent Test**: Navigate to the Guides section and confirm at least one guide has step-by-step instructions with practical examples.

**Voice/Tone**: All content MUST follow style-guide.md â€” friendly, clear, pragmatic. Speaks like a helpful CLI companion. Use `> dottie command` format for examples.

### Implementation for User Story 7

- [X] T051 [P] [US7] Write docs/guides/profile-inheritance.md â€” guide for using extends keyword, multi-level inheritance, override behavior with examples
- [X] T052 [P] [US7] Write docs/guides/github-releases.md â€” guide for configuring GitHub release downloads with repo, asset, binary fields and architecture placeholders
- [X] T053 [P] [US7] Write docs/guides/apt-repos.md â€” guide for adding APT repositories with key_url, repo, and packages fields
- [X] T054 [P] [US7] Write docs/guides/fonts.md â€” guide for installing Nerd Fonts and other fonts via URL downloads
- [X] T055 [P] [US7] Write docs/guides/scripts.md â€” guide for running custom scripts with security considerations and examples
- [X] T056 [US7] Verify Guides section builds and all 5 pages render by running `npm run build` in website/

**Checkpoint**: User Story 7 complete â€” all 5 how-to guides are live with task-oriented content.

---

## Phase 10: Polish & Cross-Cutting Concerns

**Purpose**: Final cleanup that affects multiple user stories

- [X] T057 [P] Simplify README.md â€” replace detailed content with brief project description, installation one-liner, and prominent link to documentation site
- [X] T058 [P] Add feature highlight cards to landing page in website/src/pages/index.tsx â€” YAML config, profiles, install blocks, CLI commands
- [X] T059 Verify full site builds end-to-end with all content and no broken links by running `npm run build` in website/
- [X] T059b Run Lighthouse audit on deployed site and verify accessibility score â‰¥ 90 per SC-008
- [X] T060 Run quickstart.md validation â€” verify local development workflow (npm install, npm start, npm run build, npm run serve) works per specs/013-docs-website/quickstart.md

---

## Dependencies & Execution Order

### Phase Dependencies

- **Setup (Phase 1)**: No dependencies â€” can start immediately
- **Foundational (Phase 2)**: Depends on Setup completion â€” BLOCKS all user stories
- **User Story 1 (Phase 3)**: Depends on Foundational (Phase 2)
- **User Story 2 (Phase 4)**: Depends on Foundational (Phase 2) â€” can run parallel to US1
- **User Story 3 (Phase 5)**: Depends on Foundational (Phase 2) â€” can run parallel to US1/US2
- **User Story 4 (Phase 6)**: Depends on Foundational (Phase 2) â€” can run parallel to earlier stories
- **User Story 5 (Phase 7)**: Depends on Foundational (Phase 2) â€” can run parallel to earlier stories
- **User Story 6 (Phase 8)**: Depends on Foundational (Phase 2) â€” can run parallel to earlier stories
- **User Story 7 (Phase 9)**: Depends on Foundational (Phase 2) â€” can run parallel to earlier stories
- **Polish (Phase 10)**: Depends on all user stories being complete

### User Story Dependencies

- **US1 (Browse Online)**: After Foundational â€” creates placeholder pages for all sections. Other stories expand those placeholders.
- **US2 (Getting Started)**: After Foundational â€” independent of US1 content (different files)
- **US3 (Deployment)**: After Foundational â€” fully independent (only touches .github/workflows/)
- **US4 (Commands)**: After Foundational â€” independent, expands commands/ placeholder
- **US5 (Architecture & Config)**: After Foundational â€” independent, expands architecture/ and configuration/ placeholders
- **US6 (Dark/Light Mode)**: After Foundational â€” independent (only touches custom.css)
- **US7 (Guides)**: After Foundational â€” independent, expands guides/ placeholder

### Within Each User Story

- Content pages marked [P] can be written in parallel (different files)
- Build verification task runs last in each story

### Parallel Opportunities

- T011â€“T015 (_category_.json files): All 5 can be created in parallel
- T020â€“T024 (US1 placeholder pages): All 5 can be created in parallel
- T027â€“T029 (US2 Getting Started pages): All 3 can be written in parallel
- T034â€“T039 (US4 Command pages): All 6 can be written in parallel
- T041â€“T047 (US5 Architecture + Configuration pages): All 7 can be written in parallel
- T051â€“T055 (US7 Guide pages): All 5 can be written in parallel
- US1â€“US7: All stories can run in parallel once Foundational phase completes

---

## Parallel Example: User Story 4

```bash
# Launch all command pages in parallel (different files, no dependencies):
Task: "Write docs/commands/validate.md" (T034)
Task: "Write docs/commands/link.md" (T035)
Task: "Write docs/commands/install.md" (T036)
Task: "Write docs/commands/apply.md" (T037)
Task: "Write docs/commands/status.md" (T038)
Task: "Write docs/commands/initialize.md" (T039)

# Then verify build:
Task: "Verify Commands section builds" (T040)
```

---

## Implementation Strategy

### MVP First (User Story 1 Only)

1. Complete Phase 1: Setup (T001â€“T005)
2. Complete Phase 2: Foundational (T006â€“T017)
3. Complete Phase 3: User Story 1 (T018â€“T026)
4. **STOP and VALIDATE**: Site has landing page + 5 sections with placeholder content
5. Deploy via Phase 5 (US3) to GitHub Pages

### Incremental Delivery

1. Setup + Foundational â†’ Foundation ready
2. US1 (Browse) â†’ Navigable site with placeholders (MVP!)
3. US2 (Getting Started) â†’ New users can follow installation guide
4. US3 (Deployment) â†’ Site auto-deploys on push to main
5. US6 (Theme) â†’ Terminal-inspired dark/light mode
6. US4 (Commands) â†’ Full CLI reference
7. US5 (Architecture) â†’ Diagrams and configuration reference
8. US7 (Guides) â†’ Task-oriented how-to articles
9. Polish â†’ README update, landing page enhancements, final build verification

### Notes

- [P] tasks = different files, no dependencies
- [Story] label maps task to specific user story for traceability
- Each user story is independently completable and testable
- Commit after each task or logical group
- Stop at any checkpoint to validate story independently
- Build verification (`npm run build`) is the test gate for each story
